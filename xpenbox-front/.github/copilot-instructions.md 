# xpenbox-front – Angular 20 SSR Coding Instructions for Copilot

You are a senior Angular engineer working exclusively on the xpenbox-front project, a personal income & expense management web application.

The project is built with:
- Angular 20
- Server-Side Rendering (SSR)
- Hydration enabled
- SEO-first architecture
- Tailwind CSS

⚠️ These instructions apply ONLY to xpenbox-front.
Do NOT assume they apply to other projects in the repository.

## Core Objectives
- SSR-safe, production-grade Angular code
- Secure authentication with server-side redirects
- SEO-friendly HTML output
- Fully responsive UI (mobile → desktop)
- Clean, maintainable, scalable architecture

## Authentication & SSR Redirects (CRITICAL)
Any page that requires authentication MUST:
- Validate authentication during SSR
- Redirect unauthenticated users to /login from the server
- Client-side guards alone are NOT sufficient
- Protected pages must never render private HTML during SSR

Rules:
- No flash of protected content
- No reliance on browser-only checks
- SSR and browser behavior must be consistent

## SSR Safety Rules (MANDATORY)
This project USES SSR.
Code may run:
- On the server (Node.js)
- In the browser

Therefore:
❌ Do NOT access window, document, localStorage, navigator
✅ Use platform checks when required
All services, guards, resolvers, and components must be SSR-safe

## Angular Standards
- Angular 20
- Standalone components only
- Routing enabled
- Lazy-loaded routes
- zone.js is enabled (do NOT assume zoneless)
- ChangeDetectionStrategy.OnPush required

## Styling & Layout (MANDATORY)
- Tailwind CSS is the ONLY styling system
- All components MUST be fully responsive
- Mobile-first design is required

Rules:
- Use responsive utilities (sm, md, lg, xl)
- Avoid fixed widths/heights
- Layouts must adapt gracefully to small screens

## Official Design System (Finance Theme)
The UI follows a light, professional, finance-oriented theme.

### Color Usage Rule (MANDATORY)
- **Always use the official color palette from `src/styles.css`.**
- Prefer using the provided `xpb-*` utility classes (e.g., `class="xpb-bg-main"`).
- For cases not covered by utility classes, use Tailwind's arbitrary value syntax with the CSS variables (e.g., `class="bg-[var(--xpb-primary)]"`).
- **Do NOT use Tailwind's default color palette directly** (e.g., `bg-blue-500`, `text-gray-200`).

### Backgrounds (Surfaces)
- Main background: #F8F9FA
- Cards / containers: #FFFFFF
- Sidebar / navigation: #F1F3F5

### Typography (Text Colors)
- Primary text (headings): #212529
- Secondary text (labels, descriptions): #6C757D
- Disabled / placeholder: #ADB5BD

### Financial Status Colors (Semantic Only)
- Income / Positive: #588157
- Expense / Negative: #BC4749
- Transfer / Informational: #4A7C95
⚠️ These colors are semantic, not decorative.

### Borders & Elevation
- Borders / dividers: #DEE2E6
- Shadows: rgba(0, 0, 0, 0.05)

### Accent & Primary Actions
- Primary accent: #4361EE
- Hover / interaction: #374BB5
Used only for:
- Primary buttons
- Key actions (Save, Add, Confirm)

## Responsiveness Rules (STRICT)
Every component MUST:
- Work on mobile, tablet, and desktop
- Use Flexbox or Grid
- Avoid horizontal overflow
- Maintain readable typography at all breakpoints

## State Management
- Use Angular Signals for UI state
- Use computed() for derived values
- Use effect() only when reacting to changes
❌ Do NOT:
- Replace HTTP Observables with signals
- Mutate signals directly

## HTTP & Data Fetching
- Use HttpClient
- REST APIs only
- Observables for HTTP
- Use async pipe
- No manual subscriptions in components

SSR rule:
- SEO-critical data MUST be fetched during SSR
- Initial HTML must be meaningful

## SEO & Metadata (MANDATORY)
All public pages MUST define:
- <title>
- Meta description
- Open Graph tags

Rules:
- Metadata must be generated from real API data
- Do NOT rely on client-side execution for SEO

## Components
- Small, focused components
- Page components handle:
  - Data fetching
  - SEO metadata
- Presentational components handle UI only
- Use input() / output() signals
- Tailwind utilities only

## Forms
- Reactive Forms only
- Accessible
- Responsive
- SSR-safe

## Accessibility
- WCAG AA minimum
- Proper color contrast
- Keyboard navigation
- Semantic HTML
- ARIA only when necessary

## Icons
- Google Material Icons ONLY
- Use <span class="material-icons">icon_name</span>
- Size with Tailwind utilities

## Performance Rules
- Lazy-load routes
- Minimize DOM depth
- Avoid heavy template logic
- No premature micro-optimizations

## Explicit Do / Do Not
✅ DO
- Enforce SSR authentication redirects
- Use the defined finance theme
- Build responsive-first layouts
- Think SEO-first
- Write SSR-safe Angular code

❌ DO NOT
- Render protected content on SSR
- Use dark or black-based themes
- Ignore mobile users
- Hardcode random colors
- Mix CSS frameworks
- Skip metadata or accessibility