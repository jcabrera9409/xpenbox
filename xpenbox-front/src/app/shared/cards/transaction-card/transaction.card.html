<div class="xpb-bg-card rounded-lg shadow-sm p-3 sm:p-4 hover:shadow-md transition-shadow">
    <div class="flex items-start gap-3">
        <!-- Información principal -->
        <div class="flex-1 min-w-0">
            <!-- Primera línea: Tipo, descripción y monto -->
            <div class="flex items-start justify-between gap-2 mb-1">
                <div class="flex-1 min-w-0">
                    <span class="inline-block px-4 py-1 rounded-full text-[11px] sm:text-xs font-medium" 
                          [ngStyle]="{
                            'background-color': 'color-mix(in srgb, var(--' + getTransactionBgColorClass(transaction()?.transactionType) + ') 10%, transparent)',
                            'color': 'color-mix(in srgb, var(--' + getTransactionBgColorClass(transaction()?.transactionType) + ') 50%, transparent)'
                          }">
                        {{ getTransactionLabel(transaction()?.transactionType) }}
                    </span>
                    <h5 class="text-sm sm:text-xs font-bold xpb-text-secondary truncate my-1">{{ transaction()?.description }}</h5>
                </div>
                <div class="text-right flex-shrink-0">
                    <div class="text-lg sm:text-xl font-bold" [ngClass]="getTransactionColorClass(transaction()?.transactionType)">
                        @if (transaction()?.transactionType === transactionType.INCOME) {
                        <span>+</span>
                        } @else if (transaction()?.transactionType === transactionType.EXPENSE) {
                        <span>-</span>
                        }
                        {{currency()}} {{ getFormatAmount(transaction()?.amount) }}
                    </div>
                </div>
            </div>

            <!-- Segunda línea: Fecha y detalles -->
            <div class="flex flex-wrap items-center gap-x-3 gap-y-1 text-xs xpb-text-secondary mb-2">
                <!-- Fecha con hora -->
                <div class="flex items-center gap-1">
                    <span class="material-icons text-xs">schedule</span>
                    <span>{{ getFormatDate(transaction()?.transactionDateTimestamp) }}</span>
                </div>

                <!-- Detalles según tipo -->
                @if (transaction()?.transactionType === transactionType.EXPENSE) {
                    @if (transaction()?.category) {
                        <div class="flex items-center gap-1">
                            <span class="material-icons text-xs">label</span>
                            <span>{{ transaction()?.category?.name }}</span>
                        </div>
                    }
                    @if (transaction()?.account) {
                        <div class="flex items-center gap-1">
                            <span class="material-icons text-xs">account_balance</span>
                            <span>{{ transaction()?.account?.name }}</span>
                        </div>
                    }
                    @if (transaction()?.creditCard) {
                        <div class="flex items-center gap-1">
                            <span class="material-icons text-xs">credit_card</span>
                            <span>{{ transaction()?.creditCard?.name }}</span>
                        </div>
                    }
                }

                @if (transaction()?.transactionType === transactionType.INCOME) {
                    @if (transaction()?.category) {
                        <div class="flex items-center gap-1">
                            <span class="material-icons text-xs">label</span>
                            <span>{{ transaction()?.category?.name }}</span>
                        </div>
                    }
                    @if (transaction()?.account) {
                        <div class="flex items-center gap-1">
                            <span class="material-icons text-xs">account_balance</span>
                            <span>{{ transaction()?.account?.name }}</span>
                        </div>
                    }
                }

                @if (transaction()?.transactionType === transactionType.CREDIT_PAYMENT) {
                    @if (transaction()?.category) {
                        <div class="flex items-center gap-1">
                            <span class="material-icons text-xs">label</span>
                            <span>{{ transaction()?.category?.name }}</span>
                        </div>
                    }
                    @if (transaction()?.account && transaction()?.creditCard) {
                        <div class="flex items-center gap-1">
                            <span>{{ transaction()?.account?.name }} → {{ transaction()?.creditCard?.name }}</span>
                        </div>
                    }
                }

                @if (transaction()?.transactionType === transactionType.TRANSFER) {
                    @if (transaction()?.category) {
                        <div class="flex items-center gap-1">
                            <span class="material-icons text-xs">label</span>
                            <span>{{ transaction()?.category?.name }}</span>
                        </div>
                    }
                    @if (transaction()?.account && transaction()?.destinationAccount) {
                        <div class="flex items-center gap-1">
                            <span>{{ transaction()?.account?.name }} → {{ transaction()?.destinationAccount?.name }}</span>
                        </div>
                    }
                }
            </div>

            <!-- Botones de acción -->
            <div class="flex items-center justify-center sm:justify-start gap-2 pt-1 border-t xpb-border">
                <!-- Detalle - Neutro -->
                <button 
                    (click)="sendDetailView()"
                    class="flex items-center gap-1 px-2 py-1 rounded hover:bg-[var(--xpb-neutral)]/30 transition-colors text-xs text-[var(--xpb-text-primary)]/70 hover:text-[var(--xpb-secondary)]">
                    <span class="material-icons text-sm">visibility</span>
                    <span class="hidden sm:inline">Detalle</span>
                </button>
                <!-- Editar - Primary suave -->
                <button 
                    (click)="sendEditView()"
                    class="flex items-center gap-1 px-2 py-1 rounded hover:bg-[var(--xpb-primary)]/10 transition-colors text-xs text-[var(--xpb-primary)]/70 hover:text-[var(--xpb-primary)]">
                    <span class="material-icons text-sm">edit</span>
                    <span class="hidden sm:inline">Editar</span>
                </button>
                <!-- Eliminar - Rojo -->
                <button 
                    (click)="sendDeleteView()"
                    class="flex items-center gap-1 px-2 py-1 rounded hover:bg-[var(--xpb-expense)]/10 transition-colors text-xs text-[var(--xpb-expense)]/70 hover:text-[var(--xpb-expense)]">
                    <span class="material-icons text-sm">delete</span>
                    <span class="hidden sm:inline">Eliminar</span>
                </button>
            </div>
        </div>
    </div>
</div>